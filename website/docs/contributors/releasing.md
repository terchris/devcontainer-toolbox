---
title: Releasing
sidebar_position: 5
---

# Releasing New Versions

How to create and publish new versions of devcontainer-toolbox.

## Two Version Systems

The toolbox has two independent version tracks:

| | Container version | Scripts version |
|---|---|---|
| **File** | `version.txt` (manual) | `scripts-version.txt` (auto by CI) |
| **What changes** | Dockerfile, OS packages, runtimes | Shell scripts, configs, commands |
| **Update command** | `dev-update` (docker pull + rebuild) | `dev-sync` (download zip, swap scripts) |
| **When to bump** | Manually, before releases | Automatically when scripts change |

### Container version (`version.txt`)

Stored in `version.txt` at the repository root:

```
1.3.1
```

This is bumped manually before releases. Changes to `version.txt` trigger a Docker image build.

### Scripts version (`scripts-version.txt`)

Auto-generated by CI whenever scripts in `.devcontainer/` change:

```
SCRIPTS_VERSION=2026-02-16-a3f2b1c
SCRIPTS_DATE=2026-02-16
SCRIPTS_HASH=a3f2b1c
```

You never need to edit this file — CI handles it.

---

## Release Process

### 1. Update the Version

Edit `version.txt` with the new version number:

```bash
echo "1.3.2" > version.txt
```

### 2. Commit and Push

```bash
git add version.txt
git commit -m "chore: bump version to 1.3.2"
git push
```

### 3. Automatic Release

When you merge a PR to `main`, GitHub Actions automatically:

1. Runs CI tests
2. Auto-updates documentation if needed
3. If tests pass, creates a release:
   - Reads version from `version.txt`
   - Creates `.devcontainer/.version` file
   - Packages everything into `dev_containers.zip`
   - Creates GitHub release tagged "latest"

---

## Version Numbering

Use semantic versioning: `MAJOR.MINOR.PATCH`

| Change Type | Example | When to Use |
|-------------|---------|-------------|
| PATCH (1.0.x) | 1.3.1 → 1.3.2 | Bug fixes, small improvements |
| MINOR (1.x.0) | 1.3.2 → 1.4.0 | New features, backward compatible |
| MAJOR (x.0.0) | 1.4.0 → 2.0.0 | Breaking changes |

---

## How Updates Reach Users

### Script updates (most common)

```
You merge PR with script changes to main
       ↓
CI Tests run → If pass → Zip workflow runs
       ↓
CI generates scripts-version.txt + dev_containers.zip
       ↓
User's container auto-checks on startup (dev-sync --quiet)
       ↓
Or user runs `dev-sync` manually
       ↓
dev-sync downloads zip, swaps scripts atomically
```

### Container updates (rare)

```
You bump version.txt and merge to main
       ↓
CI Tests run → Image build workflow runs
       ↓
New Docker image pushed to ghcr.io
       ↓
User runs `dev-update` in their container
       ↓
dev-update shows docker pull + rebuild instructions
```

---

## Files Involved

| File | Role |
|------|------|
| `version.txt` | Container version (manual bump) |
| `scripts-version.txt` | Scripts version (auto-generated by CI) |
| `.devcontainer/.version` | Created during release |
| `.devcontainer/devcontainer.json` | Build-mode config (toolbox development only) |
| `.github/workflows/ci-tests.yml` | Runs tests on push |
| `.github/workflows/zip_dev_setup.yml` | Creates release + updates scripts-version.txt |
| `.github/workflows/build-image.yml` | Builds Docker image (on version.txt change) |

---

## Checking Current Version

**In repository:**
```bash
cat version.txt
```

**In a devcontainer:**
```bash
dev-help
```

---

## Troubleshooting

### Release not created?

1. Check if CI tests passed: Go to Actions tab on GitHub
2. The zip workflow only runs after CI tests succeed

### Users not seeing script update?

1. Verify `scripts-version.txt` was updated on GitHub (check the latest commit)
2. User can run `dev-sync --check` to see if an update is available
3. User can run `dev-sync --force` to force re-download

### Users not seeing container update?

1. Verify the release was created on GitHub
2. User needs to run `dev-update` to check for updates
3. After update, VS Code should prompt to rebuild

### Wrong version in release?

The version comes from `version.txt` at the time of the push. Make sure you committed the updated `version.txt` before pushing.
